{% extends "main/base_navigate.html" %}

{% block app_content %}
<br>
<br>
<div class="pagestyle">
    <table class="table table-borderless">
        <tr>
            <td ALIGN="CENTER">
                <h4 class="pnavbut"><b>Your predicted well-being score</b></h4>
            </td>
        </tr>
        <tr>
            <td ALIGN="LEFT">
                {# — Score — #}
                {% set gauge_score = explain_dic.predicted_score %}
                {% include 'main/explain_intro_and_gauge.html' %}

                {# — Key factors — #}
                <h4 class="pnavsub">Key factors</h4>
                <p>
                    According to our algorithm, the <strong>{{ explain_dic.n_informative }}</strong> lifestyle factors that most strongly predict your well-being score are:
                    <ol>
                    {% for question_id, question_data in explain_dic.feature_content_dic.items() %}
                    <li>
                        <strong>{{ question_data[0] }}</strong>: {{ question_data[1] }}
                    </li>
                    {% endfor %}
                </ol>
                </p>

                {# — Radar chart — #}
                <h4 class="pnavsub">Radar chart visualization</h4>
                <p>
                    Each axis of the radar chart represents one of the key factors above. The position on each axis shows how well you are doing in that area, based on your answers to the corresponding questions. Therefore, the <strong>closer</strong> the point on an axis is <strong>to the center</strong> of the chart, the more <strong>room there is for improvement</strong> in that factor.
                </p>

                <div class="chart-container">
                    <img src="{{ url_for('main.radar_chart',
                        labels=explain_dic.feature_content_dic.values() | map(attribute=0) | join(','),
                        values=explain_dic.feature_content_dic.values() | map(attribute=4) | join(',')
                        ) }}"
                        alt="Radar Chart">
                </div>

                {# — Disclaimer — #}
                <h4 class="pnavsub">About this tool </h4>
                <p>
                    This chart highlights only the {{ explain_dic.n_informative }} most predictive factors identified by the algorithm. However, other factors may also impact your well-being score.
                </p>
                <p>
                    The insights provided here are based on the algorithm trained in our pilot study and are not intended to replace professional advice. For any concerns about your mental health, we encourage you to speak with a qualified healthcare provider.
                </p>
            </td>
        </tr>
    </table>
    <a>
        <form action="{{ url_for('main.satisfaction') }}" method="post">
            <div style="text-align: left;">
                <input type="submit" value="Next" class="btn btn-primary btn-submit">
            </div>
        </form>
    </a>
    <br>
</div>
{% endblock %}
